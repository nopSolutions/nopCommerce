/*
* Copyright 2016 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/

(function (n, t) { var i = function () { var t = 0, i = n("#categories"), r = 0, u = n("#ajax-filters-pro-subcategories"); return u.length > 0 && (r = u.data("kendoDropDownList").value()), i.length > 0 && (t = i.data("kendoDropDownList").value()), parseInt(r) || parseInt(t) || 0 }; n(document).ready(function () { var r = n(".home-page-filters-wrapper.ajax-filters-pro"), b = r.attr("data-showCategoryDropdown") === "true", a = r.attr("data-showCategoryAndSubcategoryDropdown") === "true", k = r.attr("data-showManufacturerDropdown") === "true", v = r.attr("data-showCategoryAndManufacturerDropdown") === "true", c = r.attr("data-showCategorySubcategoryAndManufacturerDropdown") === "true", u = b || a || v || c, e = a || c, o = k || v || c, y = r.attr("data-getCategoriesUrl"), d = r.attr("data-getManufacturersUrl"), f = r.attr("data-getSpecificationsUrl"), s = n(".ajaxFiltersProSpecificationItem"), h = !1, p, w; if (u && (p = function (t) { if (t.sender.selectedIndex === 0 || e) { n("#home-page-filter-total-products-count").css("display", "none"); return } n("#home-page-filter-total-products-count").css("display", "inline-block").addClass("loading"); n.ajax({ url: f, type: "POST", data: { specificationId: 0, categoryId: i(), selectedSpecificationIds: [] }, success: function (t) { t.length && t.length > 0 && n("#home-page-filter-total-products-count").removeClass("loading").text(t[0].TotalCount) } }) }, n("#categories").kendoDropDownList({ autoBind: !0, dataTextField: "Name", dataValueField: "Id", optionLabel: r.attr("data-categoryResource"), select: function (t) { t.item.index() === 0 && n("#home-page-filter-total-products-count").css("display", "none") }, dataSource: { type: "json", serverFiltering: !0, transport: { read: { url: y, type: "POST" } }, change: function () { h || (h = !0, n.event.trigger({ type: "nopAjaxFiltersProInitialLoadEvent" })) } }, change: s.length === 0 ? p : t }).data("kendoDropDownList").list.addClass("home-page-filter-dropdown")), e && (w = function (t) { if (t.sender.selectedIndex === 0) { n("#home-page-filter-total-products-count").css("display", "none"); return } n("#home-page-filter-total-products-count").css("display", "inline-block").addClass("loading"); n.ajax({ url: f, type: "POST", data: { specificationId: 0, categoryId: i(), selectedSpecificationIds: [] }, success: function (t) { t.length && t.length > 0 && n("#home-page-filter-total-products-count").removeClass("loading").text(t[0].TotalCount) } }) }, n("#ajax-filters-pro-subcategories").kendoDropDownList({ autoBind: !0, dataTextField: "Name", dataValueField: "Id", optionLabel: r.attr("data-subcategoryResource"), select: function (t) { t.item.index() === 0 && n("#home-page-filter-total-products-count").css("display", "none") }, dataSource: { type: "json", serverFiltering: !0, transport: { read: { url: y, type: "POST", data: function () { return { parentCategoryId: n("#categories").data("kendoDropDownList").value() } } } } }, change: w, cascadeFrom: "categories" }).data("kendoDropDownList").list.addClass("home-page-filter-dropdown")), o) { var g = function () { return { categoryId: i() } }, nt = function () { n("#home-page-filter-total-products-count").css("display", "inline-block").addClass("loading") }, tt = function (t) { t.response.length && t.response.length > 0 && n("#home-page-filter-total-products-count").removeClass("loading").text(t.response[0].TotalCount) }, it = function (r) { if (r.sender.selectedIndex === 0) { n("#home-page-filter-total-products-count").css("display", "none"); return } n("#home-page-filter-total-products-count").css("display", "inline-block").addClass("loading"); n.ajax({ url: f, type: "POST", data: { categoryId: u ? i() : t, manufacturerId: this.value(), specificationId: 0, selectedSpecificationIds: [] }, success: function (t) { t.length && t.length > 0 && n("#home-page-filter-total-products-count").removeClass("loading").text(t[0].TotalCount) } }) }, l = null; u && (l = "categories"); e && (l = "ajax-filters-pro-subcategories"); n("#manufacturers").kendoDropDownList({ dataTextField: "Name", dataValueField: "Id", optionLabel: r.attr("data-manufacturerResource"), select: function (t) { t.item.index() === 0 && n("#home-page-filter-total-products-count").css("display", "none") }, dataSource: { type: "json", serverFiltering: !0, transport: { read: { url: d, type: "POST", data: u ? g : t } }, change: function () { h || (h = !0, n.event.trigger({ type: "nopAjaxFiltersProInitialLoadEvent" })) }, requestStart: u ? nt : t, requestEnd: u ? tt : t }, change: s.length === 0 ? it : t, cascadeFrom: l }).data("kendoDropDownList").list.addClass("home-page-filter-dropdown") } s.each(function () { var r = n(this), a = parseInt(r.attr("data-id")) || 0, v = r.attr("data-name") || "", c = r.closest(".home-page-filter-selector").prev().find("input.ajaxFiltersProSpecificationItem"), y = r.closest(".home-page-filter-selector").next().find("input.ajaxFiltersProSpecificationItem"), h = "", l; u && (h = "categories"); e && (h = "ajax-filters-pro-subcategories"); o && (h = "manufacturers"); c.length > 0 && (h = "specification_" + c.attr("data-id")); l = function (r) { if (r.sender.selectedIndex === 0) { n("#home-page-filter-total-products-count").css("display", "none"); return } var e = []; s.each(function () { e.push(n(this).data("kendoDropDownList").value()) }); n("#home-page-filter-total-products-count").css("display", "inline-block").addClass("loading"); n.ajax({ url: f, type: "POST", data: { categoryId: u ? i() : t, manufacturerId: o ? n("#manufacturers").data("kendoDropDownList").value() : t, specificationId: 0, selectedSpecificationIds: e }, success: function (t) { t.length && t.length > 0 && n("#home-page-filter-total-products-count").removeClass("loading").text(t[0].TotalCount) } }) }; n("#specification_" + r.attr("data-id")).kendoDropDownList({ cascadeFrom: h, dataTextField: "Name", dataValueField: "Id", optionLabel: v, select: function (t) { t.item.index() === 0 && n("#home-page-filter-total-products-count").css("display", "none") }, dataSource: { type: "json", serverFiltering: !0, transport: { read: { url: f, type: "POST", data: function () { var u = []; return r.closest(".home-page-filter-selector").prevAll().find("input.ajaxFiltersProSpecificationItem").each(function () { u.push(n("#specification_" + n(this).attr("data-id")).data("kendoDropDownList").value()) }), { categoryId: i(), manufacturerId: o ? n("#manufacturers").data("kendoDropDownList").value() : t, specificationId: a, selectedSpecificationIds: u } } } }, requestStart: function () { n("#home-page-filter-total-products-count").css("display", "inline-block").addClass("loading") }, requestEnd: function (t) { if (t.response.length && t.response.length > 0) { var i = t.response[0].TotalCount; n("#home-page-filter-total-products-count").removeClass("loading").text(i) } } }, change: y.length === 0 ? l : t }).data("kendoDropDownList").list.addClass("home-page-filter-dropdown") }) }); n(document).on("nopAjaxFiltersProInitialLoadEvent", function () { n(".home-page-filter-selector:first input").change(function () { n(this).val() !== "" ? n(".search-button").attr("disabled", !1) : n(".search-button").attr("disabled", "disabled") }) }) })(jQuery);