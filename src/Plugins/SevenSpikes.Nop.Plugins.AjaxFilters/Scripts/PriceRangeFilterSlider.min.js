/*
* Copyright 2016 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/

PriceRangeFilterManager=function(){},function(a,b,c){function d(b,d,e,f){var g=parseFloat(a("#slider").attr("data-sliderMinValue")),h=parseFloat(a("#slider").attr("data-sliderMaxValue")),i=c.sliderSelectedFromValue,j=c.sliderSelectedToValue,k=new Object;k.CategoryId=b,k.ManufacturerId=d,k.VendorId=e,void 0!=f&&f.get(0)===a(".priceRangeFilterPanel7Spikes").get(0)&&(k.Priority=1);var l=new Object;return void 0!=i&&i!==g&&(l.From=i.toString()),void 0!=j&&j!==h&&(l.To=j.toString()),k.SelectedPriceRange=l,k.MinPrice=g.toString(),k.MaxPrice=h.toString(),k}function e(b,d){var e=parseFloat(a("#slider").attr("data-sliderMinValue")),f=parseFloat(a("#slider").attr("data-sliderMaxValue"));null!=b&&null!=d||(a("#slider").slider("option","values",[e,f]),c.sliderSelectedFromValue=e,c.sliderSelectedToValue=f,a(".priceRangeFilterPanel7Spikes .priceRangeCurrentPricesPanel .currentMinPrice").html(e.toFixed()),a(".priceRangeFilterPanel7Spikes .priceRangeCurrentPricesPanel .currentMaxPrice").html(f.toFixed())),null==b&&null!=d&&(a("#slider").slider("option","values",[e,d]),c.sliderSelectedFromValue=e,c.sliderSelectedToValue=d,a(".priceRangeFilterPanel7Spikes .priceRangeCurrentPricesPanel .currentMinPrice").html(e.toFixed()),a(".priceRangeFilterPanel7Spikes .priceRangeCurrentPricesPanel .currentMaxPrice").html(d.toFixed())),null!=b&&null==d&&(a("#slider").slider("option","values",[b,f]),c.sliderSelectedFromValue=b,c.sliderSelectedToValue=f,a(".priceRangeFilterPanel7Spikes .priceRangeCurrentPricesPanel .currentMinPrice").html(b.toFixed()),a(".priceRangeFilterPanel7Spikes .priceRangeCurrentPricesPanel .currentMaxPrice").html(f.toFixed())),null!=b&&null!=d&&(a("#slider").slider("option","values",[b,d]),c.sliderSelectedFromValue=b,c.sliderSelectedToValue=d,a(".priceRangeFilterPanel7Spikes .priceRangeCurrentPricesPanel .currentMinPrice").html(b.toFixed()),a(".priceRangeFilterPanel7Spikes .priceRangeCurrentPricesPanel .currentMaxPrice").html(d.toFixed()));var g=a(".priceRangeFilterPanel7Spikes .title a.clearPriceRangeFilter");b===e&&d===f||null==b&&null==d?g.hide():g.show()}function f(b,c,d,e){var f={minValue:d,maxValue:e},g="true"===a(".nopAjaxFilters7Spikes").attr("data-isRTL");if(g){var h=b-d,i=c-e;f.minValue=b+i,f.maxValue=c+h}return f}function g(b,c){var d=parseFloat(a("#slider").attr("data-sliderMinValue")),e=parseFloat(a("#slider").attr("data-sliderMaxValue")),g=c.values[0].toFixed(),h=c.values[1].toFixed(),i=f(d,e,g,h);a(".priceRangeFilterPanel7Spikes .priceRangeCurrentPricesPanel .currentMinPrice").html(i.minValue),a(".priceRangeFilterPanel7Spikes .priceRangeCurrentPricesPanel .currentMaxPrice").html(i.maxValue)}function h(d,e){var g=parseFloat(a("#slider").attr("data-sliderMinValue")),h=parseFloat(a("#slider").attr("data-sliderMaxValue")),i=e.values[0],j=e.values[1],k=f(g,h,i,j);c.sliderSelectedFromValue=k.minValue,c.sliderSelectedToValue=k.maxValue;var l=new b;l.requestProductsForSelectedFilters(a(".priceRangeFilterPanel7Spikes"));var m=a(".priceRangeFilterPanel7Spikes .title a.clearPriceRangeFilter");k.minValue===g&&k.maxValue===h?m.hide():m.show()}function i(c){var d=c.data.priceRangeFilterManager;d.clearPriceRangeFilterControl();var e=new b;e.requestProductsForSelectedFilters(a(".priceRangeFilterPanel7Spikes"))}function j(){a(".priceRangeFilterPanel7Spikes .title a.clearPriceRangeFilter").hide();var b=a("#slider").slider("option","min"),d=a("#slider").slider("option","max");a("#slider").slider("option",{values:[b,d]}),a(".priceRangeFilterPanel7Spikes .priceRangeCurrentPricesPanel .currentMinPrice").html(b.toFixed()),a(".priceRangeFilterPanel7Spikes .priceRangeCurrentPricesPanel .currentMaxPrice").html(d.toFixed()),c.sliderSelectedFromValue=b,c.sliderSelectedToValue=d}function k(){var b=a("#slider").slider("option","min"),c=a("#slider").slider("option","max"),d=a("#slider").slider("option","values");return d[0]!==b||d[1]!==c}c.prototype.buildPriceRangeFilterModel=d,c.prototype.SetSliderValues=e,c.prototype.sliderSlide=g,c.prototype.sliderStopped=h,c.prototype.clearPriceRangeFilter=i,c.prototype.clearPriceRangeFilterControl=j,c.prototype.determineIfPriceRangeHasBeenSelected=k,b.prototype.buildPriceRangeFilterModel=(new c).buildPriceRangeFilterModel,b.prototype.SetSliderValues=(new c).SetSliderValues,b.prototype.clearPriceRangeFilterControl=(new c).clearPriceRangeFilterControl,b.prototype.determineIfPriceRangeHasBeenSelected=(new c).determineIfPriceRangeHasBeenSelected,a(document).ready(function(){var b=a("#slider"),d=parseFloat(b.attr("data-sliderMinValue")),e=parseFloat(b.attr("data-sliderMaxValue")),f=b.attr("data-selectedFromValue"),g=b.attr("data-selectedToValue"),h=new c;b.slider({min:d,max:e,range:!0,values:[f,g],slide:h.sliderSlide,stop:h.sliderStopped}),a(".priceRangeFilterPanel7Spikes .priceRangeCurrentPricesPanel .currentMinPrice").html(d.toFixed()),a(".priceRangeFilterPanel7Spikes .priceRangeCurrentPricesPanel .currentMaxPrice").html(e.toFixed());var i=a(".priceRangeFilterPanel7Spikes .title a.clearPriceRangeFilter");i.click({priceRangeFilterManager:h},h.clearPriceRangeFilter),i.hide()})}(jQuery,FiltersManager,PriceRangeFilterManager);