/*
* Kendo UI Web v2013.3.1119 (http://kendoui.com)
* Copyright 2013 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-web-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
!function(define){return define(["./kendo.datepicker.min","./kendo.numerictextbox.min","./kendo.dropdownlist.min"],function(){!function(e){function t(l,s){l.filters&&(l.filters=e.grep(l.filters,function(e){return t(e,s),e.filters?e.filters.length:e.field!=s}))}function l(e){var t,l,s,a,i,n;if(e&&e.length)for(n=[],t=0,l=e.length;l>t;t++)s=e[t],i=s.text||s.value||s,a=null==s.value?s.text||s:s.value,n[t]={text:i,value:a};return n}function s(t,l){return e.grep(t,function(t){return t.filters?(t.filters=e.grep(t.filters,function(e){return e.field!=l}),t.filters.length):t.field!=l})}var a=window.kendo,i=a.ui,n=e.proxy,o="kendoPopup",r="init",u=".kendoFilterMenu",d="Is equal to",f="Is not equal to",c={number:"numerictextbox",date:"datepicker"},p={string:"text",number:"number",date:"date"},v=a.isFunction,m=i.Widget,b='<div><div class="k-filter-help-text">#=messages.info#</div><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label><div><button type="submit" class="k-button">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>',k='<div><div class="k-filter-help-text">#=messages.info#</div><select data-#=ns#bind="value: filters[0].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[0].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#"></select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}##if(extra){#<select class="k-filter-and" data-#=ns#bind="value: logic" data-#=ns#role="dropdownlist"><option value="and">#=messages.and#</option><option value="or">#=messages.or#</option></select><select data-#=ns#bind="value: filters[1].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[1].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#"></select>#}else{#<input data-#=ns#bind="value: filters[1].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""#/>#}##}#<div><button type="submit" class="k-button">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>',g='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=field#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list k-secondary"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[0].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[0].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#if(extra){#</ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="and" />#=messages.and#</label></li><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="or" />#=messages.or#</label></li></ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[1].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[1].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[1].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#}#</ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></div></form></div>',h='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=field#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list k-secondary"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label></li><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label></li></ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></form></div>',x=m.extend({init:function(t,l){var s,i,o,r,d=this,f="string";m.fn.init.call(d,t,l),s=d.operators=l.operators||{},t=d.element,l=d.options,l.appendToElement||(o=t.addClass("k-filterable").find(".k-grid-filter"),o[0]||(o=t.prepend('<a class="k-grid-filter" href="#"><span class="k-icon k-filter"/></a>').find(".k-grid-filter")),o.attr("tabindex",-1).on("click"+u,n(d._click,d))),d.link=o||e(),d.dataSource=l.dataSource,d.field=l.field||t.attr(a.attr("field")),d.model=d.dataSource.reader.model,d._parse=function(e){return e+""},d.model&&d.model.fields&&(r=d.model.fields[d.field],r&&(f=r.type||"string",r.parse&&(d._parse=n(r.parse,r)))),l.values&&(f="enums"),d.type=f,s=s[f]||l.operators[f];for(i in s)break;d._defaultFilter=function(){return{field:d.field,operator:i||"eq",value:""}},d._refreshHandler=n(d.refresh,d),d.dataSource.bind("change",d._refreshHandler),l.appendToElement?d._init():d.refresh()},_init:function(){var t,l=this,s=l.options.ui,i=v(s);l.pane=l.element.closest(a.roleSelector("pane")).data("kendoMobilePane"),l.pane&&(l._isMobile=!0),i||(t=s||c[l.type]),l._isMobile?l._createMobileForm(t):l._createForm(t),l.form.on("submit"+u,n(l._submit,l)).on("reset"+u,n(l._reset,l)),i&&l.form.find(".k-textbox").removeClass("k-textbox").each(function(){s(e(this))}),l.form.find("["+a.attr("role")+"=numerictextbox]").removeClass("k-textbox").end().find("["+a.attr("role")+"=datetimepicker]").removeClass("k-textbox").end().find("["+a.attr("role")+"=timepicker]").removeClass("k-textbox").end().find("["+a.attr("role")+"=datepicker]").removeClass("k-textbox"),l.refresh(),l.trigger(r,{field:l.field,container:l.form})},_createForm:function(t){var s=this,i=s.options,r=s.operators||{},d=s.type;r=r[d]||i.operators[d],s.form=e('<form class="k-filter-menu k-secondary"/>').html(a.template("boolean"===d?b:k)({field:s.field,format:i.format,ns:a.ns,messages:i.messages,extra:i.extra,operators:r,type:d,role:t,values:l(i.values)})),i.appendToElement?(s.element.append(s.form),s.popup=s.element.closest(".k-popup").data(o)):s.popup=s.form[o]({anchor:s.link,open:n(s._open,s),activate:n(s._activate,s),close:s.options.closeCallback}).data(o),s.form.on("keydown"+u,n(s._keydown,s))},_createMobileForm:function(t){var s=this,i=s.options,n=s.operators||{},o=s.type;n=n[o]||i.operators[o],s.form=e("<div />").html(a.template("boolean"===o?h:g)({field:s.field,format:i.format,ns:a.ns,messages:i.messages,extra:i.extra,operators:n,type:o,role:t,useRole:!a.support.input.date&&"date"===o||"number"===o,inputType:p[o],values:l(i.values)})),s.view=s.pane.append(s.form.html()),s.form=s.view.element.find("form"),s.view.element.on("click",".k-submit",function(e){s.form.submit(),e.preventDefault()}).on("click",".k-cancel",function(e){s._closeForm(),e.preventDefault()})},refresh:function(){var e=this,t=e.dataSource.filter()||{filters:[],logic:"and"};e.filterModel=a.observable({logic:"and",filters:[e._defaultFilter(),e._defaultFilter()]}),e.form&&a.bind(e.form.children().first(),e.filterModel),e._bind(t)?e.link.addClass("k-state-active"):e.link.removeClass("k-state-active")},destroy:function(){var e=this;m.fn.destroy.call(e),e.form&&(a.unbind(e.form),a.destroy(e.form),e.form.unbind(u),e.popup&&e.popup.destroy()),e.view&&e.view.purge(),e.link.unbind(u),e._refreshHandler&&e.dataSource.unbind("change",e._refreshHandler)},_bind:function(e){var t,l,s,a,i=this,n=e.filters,o=!1,r=0,u=i.filterModel;for(t=0,l=n.length;l>t;t++)a=n[t],a.field==i.field?(u.set("logic",e.logic),s=u.filters[r],s||(u.filters.push({field:i.field}),s=u.filters[r]),s.set("value",i._parse(a.value)),s.set("operator",a.operator),r++,o=!0):a.filters&&(o=o||i._bind(a));return o},_merge:function(l){var s,a,i,n=this,o=l.logic||"and",r=l.filters,u=n.dataSource.filter()||{filters:[],logic:"and"};for(t(u,n.field),r=e.grep(r,function(e){return""!==e.value&&null!=e.value}),a=0,i=r.length;i>a;a++)s=r[a],s.value=n._parse(s.value);return r.length&&(u.filters.length?(l.filters=r,"and"!==u.logic&&(u.filters=[{logic:u.logic,filters:u.filters}],u.logic="and"),r.length>1?u.filters.push(l):u.filters.push(r[0])):(u.filters=r,u.logic=o)),u},filter:function(e){e=this._merge(e),e.filters.length&&this.dataSource.filter(e)},clear:function(){var t=this,l=t.dataSource.filter()||{filters:[]};l.filters=e.grep(l.filters,function(e){return e.filters?(e.filters=s(e.filters,t.field),e.filters.length):e.field!=t.field}),l.filters.length||(l=null),t.dataSource.filter(l)},_submit:function(e){e.preventDefault(),this.filter(this.filterModel.toJSON()),this._closeForm()},_reset:function(){this.clear(),this._closeForm()},_closeForm:function(){this._isMobile?this.pane.navigate("",this.options.animations.right):this.popup.close()},_click:function(e){e.preventDefault(),e.stopPropagation(),this.popup||this.pane||this._init(),this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle()},_open:function(){var t;e(".k-filter-menu").not(this.form).each(function(){t=e(this).data(o),t&&t.close()})},_activate:function(){this.form.find(":kendoFocusable:first").focus()},_keydown:function(e){e.keyCode==a.keys.ESC&&this.popup.close()},events:[r],options:{name:"FilterMenu",extra:!0,appendToElement:!1,type:"string",operators:{string:{eq:d,neq:f,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{eq:d,neq:f,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"},date:{eq:d,neq:f,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},enums:{eq:d,neq:f}},messages:{info:"Show items with value that:",isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",and:"And",or:"Or",selectValue:"-Select value-",operator:"Operator",value:"Value",cancel:"Cancel"},animations:{left:"slide",right:"slide:right"}}});i.plugin(x)}(window.kendo.jQuery)})}("function"==typeof define&&define.amd?define:function(e,t){return t()});
//@ sourceMappingURL=kendo.filtermenu.min.js.map