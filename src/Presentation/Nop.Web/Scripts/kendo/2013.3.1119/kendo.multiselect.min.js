/*
* Kendo UI Web v2013.3.1119 (http://kendoui.com)
* Copyright 2013 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-web-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
!function(define){return define(["./kendo.list.min","./kendo.mobile.scroller.min"],function(){!function(e,t){function n(e,t){var n;if(null===e&&null!==t||null!==e&&null===t)return!1;if(n=e.length,n!==t.length)return!1;for(;n--;)if(e[n]!==t[n])return!1;return!0}function a(t){var n=t.firstChild;return n&&"none"===n.style.display&&(n=l(n,k)),n?e(n):n}function i(t){var n=t.lastChild;return n&&"none"===n.style.display&&(n=l(n,w)),n?e(n):n}function l(e,t){return e=e[t],e&&"none"===e.style.display&&(e=l(e,t)),e}var r=window.kendo,s=r.ui,o=s.List,u=r.keys,c=r._activeElement,d=r.data.ObservableArray,p=e.proxy,_="id",h="li",f="accept",g="filter",v="open",m="close",y="change",b="progress",T="select",k="nextSibling",w="previousSibling",C=' style="display:none"',x="aria-disabled",S="aria-readonly",I="k-state-focused",L="k-loading-hidden",D="k-state-hover",F="k-state-disabled",V="disabled",B="readonly",E=".kendoMultiSelect",A="click"+E,H="keydown"+E,O="mouseenter"+E,N="mouseleave"+E,W=O+" "+N,P=/"/g,M=e.isArray,R=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"],j=o.extend({init:function(t,n){var a,i,l=this;l.ns=E,o.fn.init.call(l,t,n),l._wrapper(),l._tagList(),l._input(),l._textContainer(),l._loader(),l._tabindex(l.input),t=l.element.attr("multiple","multiple").hide(),n=l.options,i=n.value,n.placeholder||(n.placeholder=t.data("placeholder")),a=t.attr(_),a&&(l._tagID=a+"_tag_active",a+="_taglist",l.tagList.attr(_,a)),l._aria(a),l._dataSource(),l._ignoreCase(),l._popup(),l._values=[],l._dataItems=[],l._reset(),l._enable(),l._placeholder(),n.autoBind?l.dataSource.fetch():i&&(M(i)||(i=[i]),(e.isPlainObject(i[0])||!n.dataValueField)&&(l._retrieveData=!0,l.dataSource.data(i),l.value(l._initialValues))),r.notify(l)},options:{name:"MultiSelect",enabled:!0,autoBind:!0,autoClose:!0,highlightFirst:!0,dataTextField:"",dataValueField:"",filter:"startswith",ignoreCase:!0,minLength:0,delay:100,value:null,maxSelectedItems:null,itemTemplate:"",tagTemplate:"",placeholder:"",height:200,animation:{}},events:[v,m,y,T,"dataBinding","dataBound"],setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&this.dataSource.fetch()},setOptions:function(e){o.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria(this.tagList.attr(_))},current:function(e){return this.currentTag(null),o.fn.current.call(this,e)},currentTag:function(e){var n=this;return e===t?n._currentTag:(n._currentTag&&(n._currentTag.removeClass(I).removeAttr(_),n.input.removeAttr("aria-activedescendant")),e&&(e.addClass(I).attr(_,n._tagID),n.input.attr("aria-activedescendant",n._tagID)),n._currentTag=e,t)},dataItems:function(){return this._dataItems},destroy:function(){var e=this,t=e.ns;e.wrapper.off(t),e.tagList.off(t),e.input.off(t),o.fn.destroy.call(e)},_editable:function(t){var n=this,a=t.disable,i=t.readonly,l=n.wrapper.off(E),r=n.tagList.off(E),s=n.element.add(n.input.off(E));i||a?(a?l.addClass(F):l.removeClass(F),s.attr(V,a).attr(B,i).attr(x,a).attr(S,i)):(l.removeClass(F).on(W,n._toggleHover).on("mousedown"+E,function(e){var t=-1!==e.target.className.indexOf("k-delete");e.preventDefault(),t||(n.input[0]!==c()&&n.input.focus(),0===n.options.minLength&&n.open())}),n.input.on(H,p(n._keydown,n)).on("paste"+E,p(n._search,n)).on("focus"+E,function(){n._placeholder(!1)}).on("blur"+E,function(){clearTimeout(n._typing),n._placeholder(),n.close(),n._state===g&&(n._state=f),n.element.blur()}),s.removeAttr(V).removeAttr(B).attr(x,!1).attr(S,!1),r.on(O,h,function(){e(this).addClass(D)}).on(N,h,function(){e(this).removeClass(D)}).on(A,".k-delete",function(t){n._unselect(e(t.target).closest(h)),n._change(),n.close()}))},_close:function(){var e=this;e.options.autoClose||!e._visibleItems?e.close():(e.current(e.options.highlightFirst?a(e.ul[0]):null),e.popup._position())},close:function(){this.popup.close(),this.current(null)},open:function(){var e=this;!e.ul[0].firstChild||e._state===f||e._retrieveData?(e._state="",e._open=!0,e._retrieveData=!1,e._filterSource()):e._visibleItems&&e._allowSelection()&&(e.popup.open(),e.current(e.options.highlightFirst?a(e.ul[0]):null))},toggle:function(e){e=e!==t?e:!this.popup.visible(),this[e?v:m]()},refresh:function(){var e,t=this,n=null;t.trigger("dataBinding"),e=t._render(t.dataSource.view()),t._height(e),t._setInitialValues&&(t._setInitialValues=!1,t.value(t._initialValues)),t._open&&(t._open=!1,t.toggle(e)),t.popup.visible()&&(t.popup._position(),t.options.highlightFirst&&(n=a(t.ul[0]))),t.current(n),t._touchScroller&&t._touchScroller.reset(),t._makeUnselectable(),t._hideBusy(),t.trigger("dataBound")},search:function(e){var t=this,n=t.options,a=n.ignoreCase,i=n.filter,l=n.dataTextField,r=t.input.val();n.placeholder===r&&(r=""),clearTimeout(t._typing),e="string"==typeof e?e:r,e.length>=n.minLength&&(t._state=g,t._open=!0,t._filterSource({value:a?e.toLowerCase():e,field:l,operator:i,ignoreCase:a}))},value:function(n){var a,i=this,l=e(i.tagList[0].children),r=l.length,s=0;if(n===t)return i._values;if(!i._fetchItems(n)){for(;r>s;s++)i._unselect(l.eq(s));if(null!==n){for(n=M(n)||n instanceof d?n:[n],s=0,r=n.length;r>s;s++)a=i._index(n[s]),a>-1&&i._select(a);i._old=i._values.slice()}}},_dataSource:function(){var e=this,t=e.element,n=e.options,a=n.dataSource||{};a=M(a)?{data:a}:a,a.select=t,a.fields=[{field:n.dataTextField},{field:n.dataValueField}],e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._refreshHandler=p(e.refresh,e),e._progressHandler=p(e._showBusy,e)),e.dataSource=r.data.DataSource.create(a).bind(y,e._refreshHandler).bind(b,e._progressHandler)},_fetchItems:function(n){var a=this,i=e.isArray(n)&&0===n.length;if(!i&&n)return a._fetch||a.ul[0].firstChild?t:(a.dataSource.one(y,function(){a.value(n),a._fetch=!1}),a._fetch=!0,a.dataSource.fetch(),!0)},_reset:function(){var t=this,n=t.element,a=n.attr("form"),i=a?e("#"+a):n.closest("form");i[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(t._initialValues)})},t._form=i.on("reset",t._resetHandler))},_initValue:function(){var e=this,t=e.options.value||e.element.val();null===t?t=[]:(M(t)||(t=[t]),t=e._mapValues(t)),e._old=e._initialValues=t,e._setInitialValues=!!t[0]},_mapValues:function(t){var n=this;return t&&e.isPlainObject(t[0])&&(t=e.map(t,function(e){return n._value(e)})),t},_change:function(){var e=this,t=e.value();n(t,e._old)||(e._old=t.slice(),e.trigger(y),e.element.trigger(y))},_click:function(n){var a=this,i=e(n.currentTarget);if(!n.isDefaultPrevented()){if(a.trigger(T,{item:i}))return a._close(),t;a._select(i),a._change(),a._close()}},_item:function(e,t){return e=e[t](),e[0]&&!e.is(":visible")&&(e=this._item(e,t)),e},_keydown:function(n){var s=this,o=n.keyCode,c=s._currentTag,d=s._current,p=s.input.val(),_=r.support.isRtl(s.wrapper),h=s.popup.visible();if(o===u.DOWN){if(n.preventDefault(),!h)return s.open(),t;d=d?l(d[0],k):a(s.ul[0]),d&&s.current(e(d))}else if(o===u.UP)h&&(d=d?l(d[0],w):i(s.ul[0]),s.current(e(d)),s._current[0]||s.close()),n.preventDefault();else if(o===u.LEFT&&!_||o===u.RIGHT&&_)p||(c=c?c.prev():e(s.tagList[0].lastChild),c[0]&&s.currentTag(c));else if(o===u.RIGHT&&!_||o===u.LEFT&&_)!p&&c&&(c=c.next(),s.currentTag(c[0]?c:null));else if(o===u.ENTER&&h){if(d){if(s.trigger(T,{item:d}))return s._close(),t;s._select(d)}s._change(),s._close(),n.preventDefault()}else o===u.ESC?(h?n.preventDefault():s.currentTag(null),s.close()):o===u.HOME?h?s.current(a(s.ul[0])):p||(c=s.tagList[0].firstChild,c&&s.currentTag(e(c))):o===u.END?h?s.current(i(s.ul[0])):p||(c=s.tagList[0].lastChild,c&&s.currentTag(e(c))):o!==u.DELETE&&o!==u.BACKSPACE||p?(clearTimeout(s._typing),setTimeout(function(){s._scale()}),s._search()):(o!==u.BACKSPACE||c||(c=e(s.tagList[0].lastChild)),c&&c[0]&&(s._unselect(c),s._change(),s._close()))},_hideBusy:function(){var e=this;clearTimeout(e._busy),e.input.attr("aria-busy",!1),e._loading.addClass(L),e._busy=null},_showBusy:function(){var e=this;e._busy||(e._busy=setTimeout(function(){e.input.attr("aria-busy",!0),e._loading.removeClass(L)},100))},_placeholder:function(e){var n=this,a=n.input,i=c();e===t?(e=!1,a[0]!==i&&(e=!n._dataItems[0]),n.wrapper.removeClass(I)):n.wrapper.addClass(I),n._prev="",a.toggleClass("k-readonly",e).val(e?n.options.placeholder:""),a[0]===i&&o.selectText(a[0],0,0),n._scale()},_scale:function(){var e,t=this,n=t.wrapper,a=n.width(),i=t._span.text(t.input.val());n.is(":visible")?e=i.width()+25:(i.appendTo(document.documentElement),a=e=i.width()+25,i.appendTo(n)),t.input.width(e>a?a:e)},_option:function(e,n){var a="<option",i=this._text(e),l=this._value(e);return l!==t&&(l+="",-1!==l.indexOf('"')&&(l=l.replace(P,"&quot;")),a+=' value="'+l+'"'),n&&(a+=' selected="selected"'),a+=">",i!==t&&(a+=r.htmlEncode(i)),a+="</option>"},_render:function(e){for(var t,n,a=this,i=e.length,l=a.itemTemplate,r=a._dataItems.slice(0),s=0,o=0,u="",c="";i>o;o++)t=e[o],n=a._selected(r,t),c+=l(t,o,n),u+=a._option(t,n),n||(s+=1);if(i=r.length)for(o=0;i>o;o++)u+=a._option(r[o],!0);return a.ul[0].innerHTML=c,a.element.html(u),a._visibleItems=s,s},_selected:function(e,n){var a,i=this,l=i._text,r=i._value,s=r(n),o=e.length,u=!1,c=0;for(s===t&&(s=l(n));o>c;c++)if(n=e[c],a=r(n),a===t&&(a=l(n)),a!==t&&a===s){u=!0;break}return u&&e.splice(c,1),u},_search:function(){var e=this;e._typing=setTimeout(function(){var t=e.input.val();e._prev!==t&&(e._prev=t,e.search(t))},e.options.delay)},_allowSelection:function(){var e=this.options.maxSelectedItems;return null===e||e>this._values.length},_select:function(e){var t,n,a=this,i=a._values;a._allowSelection()&&(isNaN(e)?n=e.hide().data("idx"):(n=e,a.ul[0].children[n].style.display="none"),a.element[0].children[n].selected=!0,t=a.dataSource.view()[n],a.tagList.append(a.tagTemplate(t)),a._dataItems.push(t),i.push(a._dataValue(t)),a._visibleItems-=1,a.currentTag(null),a._placeholder(),a._height(a._visibleItems),a._state===g&&(a._state=f))},_unselect:function(t){var n,a,i,l,r,s=this,o=t.index();if(t.remove(),s.currentTag(null),s._values.splice(o,1),n=s._dataItems.splice(o,1)[0],a=s._dataValue(n),o=s._index(a),-1!==o)e(s.ul[0].children[o]).show(),s.element[0].children[o].selected=!1,s._visibleItems+=1,s._height(s._visibleItems);else for(o=s.dataSource.view().length,i=s.element[0].children,r=i.length;r>o;o++)if(l=i[o],l.value==a){l.selected=!1;break}s._placeholder()},_template:function(){var e,t=this,n=t.options,a=n.itemTemplate,i=n.tagTemplate,l=n.dataSource;t.element[0].length&&!l&&(n.dataTextField=n.dataTextField||"text",n.dataValueField=n.dataValueField||"value"),e=r.template("#:"+r.expr(n.dataTextField,"data")+"#",{useWithBlock:!1}),a=a?r.template(a):e,i=i?r.template(i):e,t.itemTemplate=function(e,t,n){return'<li tabindex="-1" role="option" data-idx="'+t+'" unselectable="on" class="k-item"'+(n?C:"")+">"+a(e)+"</li>"},t.tagTemplate=function(e){return'<li class="k-button" unselectable="on"><span unselectable="on">'+i(e)+'</span><span unselectable="on" class="k-icon k-delete">delete</span></li>'}},_input:function(){var t=this,n=t.element[0].accessKey,a=t._innerWrapper.children("input.k-input");a[0]||(a=e('<input class="k-input" style="width: 25px" />').appendTo(t._innerWrapper)),t.element.removeAttr("accesskey"),t._focused=t.input=a.attr({accesskey:n,role:"listbox","aria-expanded":!1})},_tagList:function(){var t=this,n=t._innerWrapper.children("ul");n[0]||(n=e('<ul role="listbox" unselectable="on" class="k-reset"/>').appendTo(t._innerWrapper)),t.tagList=n},_loader:function(){this._loading=e('<span class="k-icon k-loading '+L+'"></span>').insertAfter(this.input)},_textContainer:function(){var t=r.getComputedStyles(this.input[0],R);t.position="absolute",t.visibility="hidden",this._span=e("<span/>").css(t).appendTo(this.wrapper)},_wrapper:function(){var t=this,n=t.element,a=n.parent("span.k-multiselect");a[0]||(a=n.wrap('<div class="k-widget k-multiselect k-header" unselectable="on" />').parent(),a[0].style.cssText=n[0].style.cssText,e('<div class="k-multiselect-wrap k-floatwrap" unselectable="on" />').insertBefore(n)),t.wrapper=a.addClass(n[0].className).css("display",""),t._innerWrapper=e(a[0].firstChild)}});s.plugin(j)}(window.kendo.jQuery)})}("function"==typeof define&&define.amd?define:function(e,t){return t()});
//@ sourceMappingURL=kendo.multiselect.min.js.map